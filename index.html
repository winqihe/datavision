<style>
    /* .sale {
        font-size: 14px;
        line-height: 2.4vw;
        height: 1.4vw;
        color: white;
        text-align: left;
    }
    /* .salelist {
        font-size: 14px;
        line-height: 1.6vw;
        height: 1.6vw;
        color: white;
    } */
    /* .saletime {
        float: right;
    }
    
    #container {
        margin: auto;
        position: relative;
        height: 150px;
        overflow: hidden;
    }
    
    #list-wrapper {
        position: relative;
    }
    
    ul {
        list-style: none;
        text-align: center;
        padding: 0 20px;
    }
    
    li {
        line-height: 25px;
        color: #fff;
        font-size: 14px;
        text-align: left;
    } */
</style>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>餐饮可视化</title>
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="./css/swiper-bundle.min.css">
</head>
<style>
    #container {
        margin: auto;
        position: relative;
        height: 150px;
        overflow: hidden;
    }
    
    #list-wrapper {
        position: relative;
    }
    
    ul {
        list-style: none;
        text-align: center;
        padding: 0 20px;
    }
    
    li {
        line-height: 25px;
        color: #fff;
        font-size: 14px;
        text-align: left;
    }
    
    .swiper-container {
        width: 100%;
        height: 100%;
    }
    
    .weather-box {
        width: 5rem;
        height: 1.3rem;
        border: 1px solid #0E94EA;
        display: flex;
        flex-flow: row nowrap;
        justify-content: space-around;
        align-items: center;
        margin: 0 0 0 135px;
        border-radius: 8%;
    }
    
    .weather-box>.data {
        width: 2.19rem;
        height: 0.65rem;
        border-right: 2px solid rgb(129, 175, 255);
    }
    
    .data>p {
        font-size: 0.16rem;
        margin: 0 5px;
        color: #cdddf7;
        text-align: center;
        margin: 0;
    }
    
    .data>p>span {
        margin: 0 4px;
    }
    
    .data>p.time {
        font-size: 0.42rem;
        height: 0.42rem;
        line-height: 0.42rem;
    }
    
    .weather-box>.weather {
        width: 1.8rem;
        height: 0.65rem;
        display: flex;
        flex-flow: row nowrap;
        justify-content: space-around;
        align-items: center;
        margin-left: 10px;
    }
    
    .weather>img {
        height: 100%;
    }
    
    .weather>div {
        width: 0.8rem;
        height: 100%;
    }
    
    .weather>div>p {
        font-size: 0.12rem;
        color: #cdddf7;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        height: 0.24rem;
        line-height: 0.24rem;
    }
    
    .weather>div>p.active {
        color: white;
        font-size: 0.16rem;
    }
    
    .time-box {
        width: 3.9rem;
        height: 0.4rem;
        position: absolute;
        top: 5px;
        right: 0;
        overflow: hidden;
        z-index: 10;
        display: none;
    }
    
    .time-div {
        float: left;
        width: 1.8rem;
        height: 0.4rem;
        position: relative;
    }
    
    .time-div.end {
        float: right;
    }
    
    .time-div>img {
        width: 0.2rem;
        height: 0.2rem;
        margin: auto;
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0.1rem;
    }
    
    .time-input {
        width: 1.8rem;
        height: 0.4rem;
        box-sizing: border-box;
        border: 1px solid #0E94EA;
        font-size: 0.16rem;
        background: rgba(14, 148, 234, 0.2);
        position: absolute;
        top: 0;
        left: 0;
        color: #cdddf7;
        padding-left: 10px;
    }
    
    .add {
        float: left;
        margin: 5px 10px 10px 20px;
        font-size: 14px;
        line-height: 2.0vw;
        color: #fa709a;
    }
    
    .less {
        float: right;
        margin: 5px 20px 10px 10px;
        font-size: 14px;
        line-height: 2.0vw;
        color: #2af598;
    }
    
    .waittime {
        color: #f78ca0;
        margin: 0px 20px 20px 20px;
        line-height: 2.0vw;
        font-size: 14px;
    }
</style>

<body>
    <header>
        <h1 style="font-size: 33px;">餐饮可视化</h1>
        <div class="showTime">NowTime：2020年3月17-0时54分14秒</div>
        <script>
            var t = null;
            t = setTimeout(time, 1000); //開始运行
            function time() {
                clearTimeout(t); //清除定时器
                dt = new Date();
                var y = dt.getFullYear();
                var mt = dt.getMonth() + 1;
                var day = dt.getDate();
                var h = dt.getHours(); //获取时
                var m = dt.getMinutes(); //获取分
                var s = dt.getSeconds(); //获取秒
                document.querySelector(".showTime").innerHTML =
                    "当前时间：" +
                    y +
                    "年" +
                    mt +
                    "月" +
                    day +
                    "-" +
                    h +
                    "时" +
                    m +
                    "分" +
                    s +
                    "秒";
                t = setTimeout(time, 1000); //设定定时器，循环运行
            }
        </script>
    </header>
    <section class="mainbox">
        <div class="column">
            <div class="panel bar">
                <h2>
                    今日Top
                </h2>
                <!--设置成滚状的文本轮播的形态，将最近卖出的菜品进行轮播-->
                <div class="chart"></div>
                <div class="panel-footer"></div>
            </div>
            <div class="panel line">
                <h2>人气推荐</h2>
                <!--按照数据中对菜品的评分进行推荐-->
                <div class="chart"></div>
                <div class="panel-footer"></div>
            </div>
            <div class="panel pie">
                <h2>增重|减肥</h2>
                <!--按照一定的菜谱来为用户进行增重or减肥-->
                <div class="box">
                    <div class="add">
                        <div>{{daname1}}</div>
                        <div>{{daname2}}</div>
                        <div>{{daname3}}</div>
                        <div>{{daname4}}</div>
                        <div>{{daname5}}</div>
                        <div>{{daname6}}</div>
                    </div>
                    <div class="less">
                        <div>{{daname7}}</div>
                        <div>{{daname8}}</div>
                        <div>{{daname9}}</div>
                        <div>{{daname10}}</div>
                        <div>{{daname11}}</div>
                        <div>{{daname12}}</div>
                    </div>
                </div>
            </div>
            <div class="panel-footer"></div>
        </div>
        </div>
        <div class="column">
            <div class="no">
                <div class="no-hd">
                    <ul>
                        <li style="font-size: 30px;">进店人数</li>
                        <li style="float: right;font-size: 40px;">1258</li>
                    </ul>
                </div>
                <div class="weather-box">
                    <div class="data">
                        <p class="time" id="time">00:00:00</p>
                        <p id="date"></p>
                    </div>
                    <div class="weather">
                        <img id="weatherImg" src="images/weather/weather_img01.png" alt="">
                        <div id="weather">
                            <p class="active">晴天</p>
                            <p>16-22℃</p>
                            <p>新乡市</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="map">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="./images/img.jpg" alt="" width="600px" height="480px">
                    </div>
                    <div class="swiper-slide">
                        <img src="./images/img2.jpg" alt="" width="600px" height="480px">
                    </div>
                    <div class="swiper-slide">
                        <img src="./images/img3.jpg" alt="" width="600px" height="480px">
                    </div>
                    <div class="swiper-slide">
                        <img src="./images/img4.jpg" alt="" width="600px" height="480px">
                    </div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>
        </div>
        </div>
        <div class="column">
            <div class="panel bar1">
                <h2>等待时间</h2>
                <div class="waittime">
                    <p class="wait1"></p>
                    <p class="wait2"></p>
                    <p class="wait3"></p>
                    <p class="wait4"></p>
                    <p class="wait5"></p>
                    <p class="wait6"></p>
                </div>
                <!--根据目前数据中购买最多的菜品进行展示-->
                <div class="chart"></div>
                <div class="panel-footer"></div>
            </div>
            <div class="panel line1">
                <h2>你的口味</h2>
                <div id="container">
                    <div id="list-wrapper">
                        <ul class="notice-list" id="notice-list">
                            <li>
                                <div class="salename1">
                                </div>

                            </li>
                            <li>
                                <div class="salename2">
                                </div>
                            </li>
                            <li>
                                <div class="salename3">
                                </div>
                            </li>
                            <li>
                                <div class="salename4">
                                </div>
                            </li>
                            <li>
                                <div class="salename5">
                                </div>
                            </li>
                            <li>
                                <div class="salename6">
                                </div>
                            </li>
                            <li>
                                <div class="salename7">
                                </div>
                            </li>
                            <li>
                                <div class="salename8">
                                </div>
                            </li>
                            <li>
                                <div class="salename9">
                                </div>
                            </li>
                            <li>
                                <div class="salename10">
                                </div>
                            </li>
                        </ul>
                        <ul class="notice-list" id="notice-list-2"></ul>
                    </div>
                </div>
                <div class="panel-footer"></div>
            </div>
            <div class="panel pie1">
                <h2>卫生检测</h2>
                <div class="chart"></div>
                <div class="panel-footer"></div>
            </div>
        </div>
    </section>
    <script src="js/flexible.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/echarts.js"></script>
    <script src="js/echarts-wordcloud.js"></script>
    <script src="js/china.js"></script>
    <script src="js/jcarousellite.js"></script>
    <script src="js/swiper-bundle.min.js"></script>
    <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script>
        var ROLL_SPEED = 100
        var noticeList1 = $('#notice-list');
        var noticeList2 = $('#notice-list-2');
        var listWrapper = $('#list-wrapper');
        noticeList2.html(noticeList1.html())
        listWrapper.css('top', 0)
        var timer = setInterval(rollStart, ROLL_SPEED);

        function rollStart() {
            if (Math.abs(_subStr(listWrapper.css('top'))) >= noticeList1.height()) {
                listWrapper.css('top', 0)
            } else {
                var top = listWrapper.css('top');
                listWrapper.css('top', _subStr(top) - 1)
            }
        }

        // 截取px前数值
        function _subStr(str) {
            var index = str.indexOf('px');
            if (index > -1) {
                return parseFloat(str.substr(0, index + 1))
            }
        }
        var swiper = new Swiper('.map', {
            pagination: {
                el: '.swiper-pagination',
            },
            loop: true,
            autoplay: true,
        });
    </script>
</body>
<!--waitime-->
<script>
    window.onload = function() {
        countDown();

        function addZero(i) {
            return i < 10 ? "0" + i : i + "";
        }

        function countDown() {
            axios.get("http://localhost:8081/waittime").then((res) => {
                var nowtime = new Date();
                var endtime1 = new Date(res.data[0][1]);
                var lefttime1 = parseInt((endtime1.getTime() - nowtime.getTime()) / 1000);
                var m1 = parseInt(lefttime1 / 60 % 60);
                var s1 = parseInt(lefttime1 % 60);
                m1_ = addZero(m1);
                s1_ = addZero(s1);
                var endtime2 = new Date(res.data[1][1]);
                var lefttime2 = parseInt((endtime2.getTime() - nowtime.getTime()) / 1000);
                var m2 = (parseInt(lefttime2 / 60 % 60) + m1);
                var s2 = (parseInt(lefttime2 % 60) + s1) % 60;
                m2_ = addZero(m2);
                s2_ = addZero(s2);
                var endtime3 = new Date(res.data[2][1]);
                var lefttime3 = parseInt((endtime3.getTime() - nowtime.getTime()) / 1000);
                var m3 = (parseInt(lefttime3 / 60 % 60) + m1 + m2);
                var s3 = (parseInt(lefttime3 % 60) + s1 + s2) % 60;
                m3_ = addZero(m3);
                s3_ = addZero(s3);
                var endtime4 = new Date(res.data[4][1]);
                var lefttime4 = parseInt((endtime4.getTime() - nowtime.getTime()) / 1000);
                var m4 = (parseInt(lefttime4 / 60 % 60) + m1 + m2 + m3);
                var s4 = (parseInt(lefttime4 % 60) + s1 + s2 + s3) % 60;
                m4_ = addZero(m4);
                s4_ = addZero(s4);
                var endtime5 = new Date(res.data[5][1]);
                var lefttime5 = parseInt((endtime5.getTime() - nowtime.getTime()) / 1000);
                var m5 = (parseInt(lefttime5 / 60 % 60) + m1 + m2 + m3 + m4);
                var s5 = (parseInt(lefttime5 % 60) + s1 + s2 + s3 + s4) % 60;
                m5_ = addZero(m5);
                s5_ = addZero(s5);
                var endtime6 = new Date(res.data[6][1]);
                var lefttime6 = parseInt((endtime6.getTime() - nowtime.getTime()) / 1000);
                var m6 = (parseInt(lefttime6 / 60 % 60) + m1 + m2 + m3 + m4 + m5);
                var s6 = (parseInt(lefttime6 % 60) + s1 + s2 + s3 + s4 + s5) % 60;
                m6_ = addZero(m6);
                s6_ = addZero(s6);
                document.querySelector(".wait1").innerHTML = res.data[0][0] + "        |       " + `等待中 ${m1_}分 ${s1_}秒`;
                document.querySelector(".wait2").innerHTML = res.data[1][0] + "        |       " + `等待中 ${m2_}分 ${s2_}秒`;
                document.querySelector(".wait3").innerHTML = res.data[2][0] + "        |       " + `等待中 ${m3_}分 ${s3_}秒`;
                document.querySelector(".wait4").innerHTML = res.data[3][0] + "        |       " + `等待中 ${m4_}分 ${s4_}秒`;
                document.querySelector(".wait5").innerHTML = res.data[4][0] + "        |       " + `等待中 ${m5_}分 ${s5_}秒`;
                document.querySelector(".wait6").innerHTML = res.data[5][0] + "        |       " + `等待中 ${m6_}分 ${s6_}秒`;
                // if (lefttime1 <= 0) {
                //     document.querySelector(".wait1").innerHTML = "成功上菜";
                //     document.querySelector(".wait2").innerHTML = "成功上菜";
                //     document.querySelector(".wait3").innerHTML = "成功上菜";
                //     document.querySelector(".wait4").innerHTML = "成功上菜";
                //     document.querySelector(".wait5").innerHTML = "成功上菜";
                //     document.querySelector(".wait6").innerHTML = "成功上菜";
                //     return;
                // }
                setTimeout(countDown, 1000);
            })
        }
    }
</script>
<!--category数据-->
<!--文本数据-->
<script>
    axios.get("http://localhost:8081/mesdata").then(res => {
        var mesdata = new Array()
        mesdata = res.data
        console.log(res.data[0]);
        new Vue({
            el: '.box',
            data: {
                daname1: res.data[0],
                daname2: res.data[1],
                daname3: res.data[2],
                daname4: res.data[3],
                daname5: res.data[4],
                daname6: res.data[6],
                daname7: res.data[5],
                daname8: res.data[8],
                daname9: res.data[7],
                daname10: res.data[9],
                daname11: res.data[10],
                daname12: res.data[11],
            },
        })
    })
    axios.get("http://localhost:8081/categorydata").then(res => {
        var categorydata = new Array()
        categorydata = res.data
        document.querySelector(".salename1").innerHTML = categorydata[0][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[0][1];
        document.querySelector(".salename2").innerHTML = categorydata[1][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[1][1];
        document.querySelector(".salename3").innerHTML = categorydata[2][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[2][1];
        document.querySelector(".salename4").innerHTML = categorydata[3][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[3][1];
        document.querySelector(".salename5").innerHTML = categorydata[4][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[4][1];
        document.querySelector(".salename6").innerHTML = categorydata[5][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[5][1];
        document.querySelector(".salename7").innerHTML = categorydata[6][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[6][1];
        document.querySelector(".salename8").innerHTML = categorydata[7][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[7][1];
        document.querySelector(".salename9").innerHTML = categorydata[8][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[8][1];
        document.querySelector(".salename10").innerHTML = categorydata[9][0] + '&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp' + categorydata[9][1];
        // new Vue({
        //     el: '#list-wrapper',
        //     data: {
        //         name1: categorydata[0][0],
        //         name2: categorydata[1][0],
        //         name3: categorydata[2][0],
        //         name4: categorydata[3][0],
        //         name5: categorydata[4][0],
        //         name6: categorydata[5][0],
        //         category1: categorydata[0][1],
        //         category2: categorydata[1][1],
        //         category3: categorydata[2][1],
        //         category4: categorydata[3][1],
        //         category5: categorydata[4][1],
        //         category6: categorydata[5][1]
        //     },
        // })
    })
</script>
<script type="text/javascript">
    $('document').ready(function() {
        $("body").css('visibility', 'visible');
        var localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
        localStorage.setItem("data", localData);

    })

    function fnW(str) {
        var num;
        str >= 10 ? num = str : num = "0" + str;
        return num;
    }
    var timer = setInterval(function() {
        var date = new Date();
        var year = date.getFullYear(); //当前年份
        var month = date.getMonth(); //当前月份
        var data = date.getDate(); //天
        var hours = date.getHours(); //小时
        var minute = date.getMinutes(); //分
        var second = date.getSeconds(); //秒
        var day = date.getDay(); //获取当前星期几 
        var ampm = hours < 12 ? 'am' : 'pm';
        $('#time').html(fnW(hours) + ":" + fnW(minute) + ":" + fnW(second));
        $('#date').html('<span>' + year + '/' + (month + 1) + '/' + data + '</span><span>' + ampm + '</span><span>周' + day + '</span>')

    }, 1000)
</script>

<script>
    (function() {
        var myChart = echarts.init(document.querySelector(".bar .chart"));
        axios.get('http://localhost:8081/getall').then(res => {
            var adata = new Array()
            adata = res.data
                //数据
            let data = [{
                "code": "600519",
                "stock": adata[0].name,
                "fundPost": adata[0].price
            }, {
                "code": "000858",
                "stock": adata[1].name,
                "fundPost": adata[1].price
            }, {
                "code": "002475",
                "stock": adata[2].name,
                "fundPost": adata[2].price
            }, {
                "code": "600276",
                "stock": adata[3].name,
                "fundPost": adata[3].price
            }, {
                "code": "601318",
                "stock": adata[4].name,
                "fundPost": adata[4].price
            }, ]

            function contains(arr, dst) {
                var i = arr.length;
                while ((i -= 1)) {
                    if (arr[i] == dst) {
                        return i;
                    }
                }
                return false;
            }
            var attackSourcesColor = [
                new echarts.graphic.LinearGradient(0, 1, 1, 1, [{
                    offset: 0,
                    color: "#EB3B5A"
                }, {
                    offset: 1,
                    color: "#FE9C5A"
                }]),
                new echarts.graphic.LinearGradient(0, 1, 1, 1, [{
                    offset: 0,
                    color: "#FA8231"
                }, {
                    offset: 1,
                    color: "#FFD14C"
                }]),
                new echarts.graphic.LinearGradient(0, 1, 1, 1, [{
                    offset: 0,
                    color: "#F7B731"
                }, {
                    offset: 1,
                    color: "#FFEE96"
                }]),
                new echarts.graphic.LinearGradient(0, 1, 1, 1, [{
                    offset: 0,
                    color: "#395CFE"
                }, {
                    offset: 1,
                    color: "#2EC7CF"
                }])
            ];
            var attackSourcesColor1 = [
                "#EB3B5A",
                "#FA8231",
                "#F7B731",
                "#3860FC",
                "#1089E7",
            ];
            var attaData = [];
            var attaName = [];
            var topName = []
            data.forEach((it, index) => {
                attaData[index] = parseFloat(it.fundPost);
                attaName[index] = it.stock;
                topName[index] = `${it.code} ${it.stock}`
            });
            var salvProMax = []; //背景按最大值
            for (let i = 0; i < attaData.length; i++) {
                salvProMax.push(attaData[0]);
            }

            function attackSourcesDataFmt(sData) {
                var sss = [];
                sData.forEach(function(item, i) {
                    let itemStyle = {
                        color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i]
                    };
                    sss.push({
                        value: item,
                        itemStyle: itemStyle
                    });
                });
                return sss;
            }
            var option = {
                tooltip: {
                    show: false,
                    backgroundColor: "rgba(3,169,244, 0.5)", //背景颜色（此时为默认色）
                    textStyle: {
                        fontSize: 16
                    }
                },
                color: ["#F7B731"],

                grid: {
                    //进行配置
                    left: "1%",
                    right: "2%",
                    width: "95%",
                    bottom: "2%",
                    top: "8%",
                    containLabel: true
                },
                xAxis: {
                    type: "value",

                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false
                    }
                },
                yAxis: [{
                    type: "category",
                    inverse: true,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisPointer: {
                        label: {
                            show: true,
                            //margin: 30
                        }
                    },
                    pdaaing: [5, 0, 0, 0],
                    postion: "right",
                    data: attaName,
                    axisLabel: {
                        margin: 30,
                        fontSize: 10,
                        align: "left",
                        padding: [2, 0, 0, 0],
                        color: "#000",
                        rich: {
                            nt1: {
                                color: "#fff",
                                backgroundColor: attackSourcesColor1[0],
                                width: 13,
                                height: 13,
                                fontSize: 10,
                                align: "center",
                                borderRadius: 100,
                                lineHeight: "5",
                                padding: [0, 1, 2, 1]
                                    // padding:[0,0,2,0],
                            },
                            nt2: {
                                color: "#fff",
                                backgroundColor: attackSourcesColor1[1],
                                width: 13,
                                height: 13,
                                fontSize: 10,
                                align: "center",
                                borderRadius: 100,
                                padding: [0, 1, 2, 1]
                            },
                            nt3: {
                                color: "#fff",
                                backgroundColor: attackSourcesColor1[2],
                                width: 13,
                                height: 13,
                                fontSize: 10,
                                align: "center",
                                borderRadius: 100,
                                padding: [0, 1, 2, 1]
                            },
                            nt: {
                                color: "#fff",
                                backgroundColor: attackSourcesColor1[3],
                                width: 13,
                                height: 13,
                                fontSize: 10,
                                align: "center",
                                lineHeight: 3,
                                borderRadius: 100,
                                padding: [0, 1, 2, 1],
                                lineHeight: 5
                            }
                        },
                        formatter: function(value, index) {
                            index = contains(attaName, value) + 1;
                            if (index - 1 < 3) {
                                return ["{nt" + index + "|" + index + "}"].join("\n");
                            } else {
                                return ["{nt|" + index + "}"].join("\n");
                            }
                        }
                    }
                }, {
                    type: "category",
                    inverse: true,
                    axisTick: "none",
                    axisLine: "none",
                    show: true,
                    axisLabel: {
                        textStyle: {
                            color: "#fff",
                            fontSize: "10"
                        }
                    },
                    data: attackSourcesDataFmt(attaName)
                }, { //名称
                    type: 'category',
                    offset: -10,
                    position: "left",
                    axisLabel: {
                        color: `#fff`,
                        fontSize: 10
                    },
                    axisLine: {
                        show: false
                    },
                    inverse: false,
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        color: ["#fff"],
                        align: "left",
                        verticalAlign: "bottom",
                        lineHeight: 30,
                        fontSize: 8
                    },
                    data: topName.stock
                }, ],
                series: [{
                    zlevel: 1,
                    type: "bar",
                    barWidth: "10px",
                    animationDuration: 1500,
                    data: attackSourcesDataFmt(attaData),
                    align: "center",
                    itemStyle: {
                        normal: {
                            barBorderRadius: 10
                        }
                    },
                    label: {
                        show: true,
                        fontSize: 10,
                        color: "#fff",
                        textBorderWidth: 2,
                        padding: [2, 0, 0, 0]
                    }
                }, {
                    type: "bar",
                    barWidth: 10,
                    barGap: "-100%",
                    margin: "20",
                    data: salvProMax,
                    textStyle: {
                        //图例文字的样式
                        fontSize: 10,
                        color: "#fff"
                    },
                    itemStyle: {
                        normal: {
                            color: "#05325F",
                            //width:"100%",
                            fontSize: 10,
                            barBorderRadius: 30
                        },
                    }
                }]
            };
            // 把配置给实例对象
            myChart.setOption(option);
        })
        window.addEventListener("resize", function() {
            myChart.resize();
        });
    })();
    // 人气推荐
    (function() {
        var myChart = echarts.init(document.querySelector('.line .chart'));
        axios.get('http://localhost:8081/clouddata').then(res => {
            var adata = new Array()
            adata = res.data
            const originData = [];
            const data = originData.map(val => ({
                ...val,
                textStyle: {
                    normal: {
                        color: randomColor()
                    }
                }
            }));

            myChart.setOption({
                series: [{
                    type: 'wordCloud',
                    shape: 'circle',
                    left: 'center',
                    top: 'center',
                    width: '70%',
                    height: '80%',
                    right: null,
                    bottom: null,
                    sizeRange: [12, 60],
                    rotationRange: [0, 0], //字符横向
                    rotationStep: 45,
                    gridSize: 8,
                    drawOutOfBound: false,
                    textStyle: {
                        normal: {
                            fontFamily: 'sans-serif',
                            fontWeight: 'normal'
                        },
                        emphasis: {
                            shadowBlur: 10,
                            shadowColor: 'white'
                        }
                    },
                    data: [{
                        name: adata[0][0],
                        value: adata[0][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[1][0],
                        value: adata[1][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[2][0],
                        value: adata[2][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[3][0],
                        value: adata[3][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[4][0],
                        value: adata[4][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[5][0],
                        value: adata[5][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[6][0],
                        value: adata[6][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[7][0],
                        value: adata[7][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[8][0],
                        value: adata[8][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[9][0],
                        value: adata[9][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[10][0],
                        value: adata[10][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[11][0],
                        value: adata[11][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[12][0],
                        value: adata[12][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[13][0],
                        value: adata[13][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[14][0],
                        value: adata[14][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[15][0],
                        value: adata[15][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[16][0],
                        value: adata[16][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }, {
                        name: adata[17][0],
                        value: adata[17][1],
                        textStyle: {
                            normal: {
                                color: randomColor()
                            }
                        }
                    }]
                }]
            });

            function randomColor() {
                return 'rgb(' + [
                    Math.round(Math.random() * 200),
                    Math.round(Math.random() * 200),
                    Math.round(Math.random() * 200)
                ].join(',') + ')';
            }
        })
        window.addEventListener("resize", function() {
            myChart.resize();
        });
    })();



    (function() {
        // 1. 实例化对象
        var myChart = echarts.init(document.querySelector(".pie1  .chart"));
        // 2. 指定配置项和数据
        axios.get("http://localhost:8081/healthdata").then(res => {
            var data = new Array()
            data = res.data
            var dataname = ['空气细菌总数', 'PM2.5', '一氧化碳', 'PM10', '空气温度', '二氧化碳', '甲醛']
            var datamax = [20, 20, 20, 20, 20, 20, 20]
            var datavaule = [11, 12, 8, 10, 18, 16, 6]

            var indicator = []
            for (var i = 0; i < dataname.length; i++) {
                indicator.push({
                    name: dataname[i],
                    max: datamax[i],
                })
            }

            function contains(arrays, obj) {
                var i = arrays.length;
                while (i--) {
                    if (arrays[i] === obj) {
                        return i;
                    }
                }
                return false;
            }

            option = {
                tooltip: {
                    show: false,
                    trigger: "item",
                },
                radar: {
                    center: ["50%", "50%"],
                    radius: "70%",
                    startAngle: 240,
                    splitNumber: 5,
                    splitArea: {
                        areaStyle: {
                            color: [
                                'rgba(0,96,208, 0.1)', 'rgba(0,96,208, 0.2)',
                                'rgba(0,96,208, 0.4)', 'rgba(0,96,208, 0.6)',
                                'rgba(0,96,208, 0.8)', 'rgba(0,96,208, 1)'
                            ].reverse()
                        }
                    },
                    axisLabel: {
                        show: false,
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: "transparent"
                        }
                    },
                    splitLine: {
                        show: true,
                        lineStyle: {
                            color: "transparent"
                        }
                    },
                    name: {
                        formatter: function(value) {
                            var i = contains(dataname, value);
                            var percent = datavaule[i];
                            var ret = ""; //拼接加\n返回的类目项  
                            var maxLength = 6; //每项显示文字个数  
                            var valLength = value.length; //X轴类目项的文字个数  
                            var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数  
                            if (rowN > 1) //如果类目项的文字大于6,
                            {
                                var temp = ""; //每次截取的字符串  
                                var start = 0; //开始截取的位置  
                                var end = maxLength; //结束截取的位置  
                                temp = value.substring(start, end) + '\n' + value.substring(end, valLength)
                                ret += temp; //凭借最终的字符串  
                                return '{a|' + percent + '}\n' + '{b|' + ret + '}'
                            } else {
                                return '{a|' + percent + '}\n' + '{b|' + value + '}'
                            }
                        },
                        textStyle: {
                            rich: {
                                b: {
                                    color: '#CAEEFF',
                                    fontSize: 11,
                                    padding: [0, 0],
                                    lineHeight: 10,
                                }
                            },
                        },
                    },
                    indicator: indicator
                },

                series: [{
                    type: "radar",
                    symbol: "circle",
                    symbolSize: 7,
                    areaStyle: {
                        normal: {
                            color: 'rgba(170, 216, 255, 0)',
                        }
                    },
                    itemStyle: {
                        color: '#84E1FF',
                        borderColor: '#00A7FE',
                        borderWidth: 1,
                    },
                    lineStyle: {
                        normal: {
                            color: "#00A7FE",
                            width: 1.5
                        }
                    },
                    data: [datavaule]
                }]
            };
            // 3. 配置项和数据给我们的实例化对象
            myChart.setOption(option);
        })

        // 4. 当我们浏览器缩放的时候，图表也等比例缩放
        window.addEventListener("resize", function() {
            // 让我们的图表调用 resize这个方法
            myChart.resize();
        });
    })();
</script>

</html>